<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~       http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<definitions xmlns="http://www.omg.org/spec/DMN/20151101/dmn.xsd"
             xmlns:feel="http://www.omg.org/spec/FEEL/20140401"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             namespace="https://github.com/droolsjbpm/kie-dmn"
             id="_edbd2d8e-a5a8-4660-9bb9-adaa792d900c"
             name="marina-exploitation-rules"
             xsi:schemaLocation="http://www.omg.org/spec/DMN/20151101/dmn.xsd"
             expressionLanguage="http://www.omg.org/spec/FEEL/20140401"
             typeLanguage="http://www.omg.org/spec/FEEL/20140401">

  <decision id="_exploiting_marina_moorings_and_seaworthiness" name="Marina Exploitation Status">
    <variable name="Marina Exploitation Status" typeRef="feel:string"/>
    <informationRequirement>
      <requiredInput href="#_noOfMoorings"/>
    </informationRequirement>
    <informationRequirement>
      <requiredInput href="#_isForSeaWorthyShip"/>
    </informationRequirement>

    <decisionTable hitPolicy="UNIQUE" outputLabel="Marina Exploitation Status" preferredOrientation="Rule-as-Row">
      <input id="_inoOfMoorings" label="noOfMoorings">
        <inputExpression typeRef="feel:number">
          <text>noOfMoorings</text>
        </inputExpression>
      </input>
      <input id="_iisForSeaWorthyShip" label="isForSeaWorthyShip">
        <inputExpression typeRef="feel:boolean">
          <text>isForSeaWorthyShip</text>
        </inputExpression>
      </input>
      <output id="_oMarinaPermit">
        <outputValues>
          <text>"Exploiting For less 10 Seaworthy Ship", "Exploiting For more 50 Non-Seaworthy Ship"</text>
        </outputValues>
      </output>
      <rule id="ruleA1">
        <inputEntry id="ruleA1-0">
          <text>&lt;10</text>
        </inputEntry>
        <inputEntry id="ruleA1-1">
          <text>true</text>
        </inputEntry>
        <outputEntry id="ruleA1-2">
          <text>"Exploiting For less 10 Seaworthy Ship"</text>
        </outputEntry>
      </rule>
      <rule id="rule2">
        <inputEntry id="ruleA2-0">
          <text>&gt;50</text>
        </inputEntry>
        <inputEntry id="ruleA2-1">
          <text>false</text>
        </inputEntry>
        <outputEntry id="rule2-2">
          <text>"Exploiting For more 50 Non-Seaworthy Ship"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
  <inputData id="_noOfMoorings" name="noOfMoorings">
    <variable name="noOfMoorings" typeRef="feel:number"/>
  </inputData>
  <inputData id="_isForSeaWorthyShip" name="isForSeaWorthyShip">
    <variable name="isForSeaWorthyShip" typeRef="feel:boolean"/>
  </inputData>

  <decision name="Marina Permit Status" id="_marina_permit">
    <variable name="Marina Permit Status" typeRef="feel:string"/>
    <informationRequirement>
      <requiredDecision href="#_exploiting_marina_moorings_and_seaworthiness"/>
    </informationRequirement>
    <decisionTable hitPolicy="UNIQUE" outputLabel="Marina Permit Status" preferredOrientation="Rule-as-Row">
      <input id="_iExploitLess10MooringsSeaworthy" label="Exploit for Less Than 10 Seaworthy Moorings Status">
        <inputExpression typeRef="feel:string">
          <text>Marina Exploitation Status</text>
        </inputExpression>
      </input>
      <input id="_iExploitMore50MooringsNonSeaworthy" label="Exploit more than 50 Non-Seaworthy Moorings Status">
        <inputExpression typeRef="feel:string">
          <text>Marina Exploitation Status</text>
        </inputExpression>
      </input>      
      <output id="_oPermitStatus">
        <outputValues>
          <text>"Marina Permit Required"</text>
        </outputValues>
      </output>

      <rule id="ruleB1">
        <inputEntry id="ruleB1-0">
          <text>"Exploiting For less 10 Seaworthy Ship"</text>
        </inputEntry>
        <inputEntry id="ruleB1-1">
          <text>-</text>
        </inputEntry>        
        <outputEntry id="ruleB1-1">
          <text>"Marina Permit Required"</text>
        </outputEntry>
      </rule>
      <rule id="ruleB2">
        <inputEntry id="ruleB2-0">
          <text>-</text>
        </inputEntry>        
        <inputEntry id="ruleB2-1">
          <text>"Exploiting For more 50 Non-Seaworthy Ship"</text>
        </inputEntry>
        <outputEntry id="ruleB2-1">
          <text>"Marina Permit Required"</text>
        </outputEntry>
      </rule>
    </decisionTable>
  </decision>
</definitions>